<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파워 원천 진단</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter 폰트 적용 */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 커스텀 메시지 박스 */
        .message-box {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        /* 활성화된 버튼 스타일 */
        .btn-choice.active {
            background-color: #2563eb; /* blue-600 */
            color: white;
            border-color: #2563eb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        /* 비활성화된 버튼 스타일 */
        .btn-choice.inactive {
            background-color: #f9fafb; /* gray-50 */
            color: #4b5563; /* gray-600 */
            border-color: #d1d5db; /* gray-300 */
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-['Inter'] py-10">

    <div class="bg-white w-full max-w-3xl mx-auto p-6 md:p-8 rounded-lg shadow-xl m-4">
        
        <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-4">
            파워 원천 진단
        </h1>
        <p class="text-gray-600 text-center mb-6 text-sm md:text-base">
            Influence Power Profile
        </p>
        
        <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-md mb-8" role="alert">
            <p class="font-bold">응답 요령</p>
            <p class="text-sm">
                총 21개의 문항이 있습니다. 각 문항을 읽고, 두 항목의 상대적 중요도에 따라 
                <strong class="font-semibold">네 가지 선택지 (3-0, 2-1, 1-2, 0-3) 중 하나</strong>를 클릭하여 점수를 부여하세요.
            </p>
        </div>

        <!-- 설문지 영역 -->
        <div id="questions-container" class="space-y-6">
            <!-- 질문이 여기에 동적으로 생성됩니다. -->
        </div>

        <!-- 버튼 영역 -->
        <div class="flex flex-col md:flex-row gap-4 mt-8">
            <button id="calculate-btn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg
                           transition duration-300 ease-in-out transform hover:-translate-y-0.5 shadow-md order-1 md:order-2">
                진단 결과 보기
            </button>
            <button id="reset-btn"
                    class="w-full md:w-auto bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg
                           transition duration-300 ease-in-out order-2 md:order-1">
                초기화
            </button>
        </div>

        <!-- 결과 영역 -->
        <div id="results-section" class="mt-10 border-t-2 border-gray-100 pt-8" style="display: none;">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">진단 결과</h2>
            
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-blue-700" id="score-A">0</span>
                    <span class="text-sm text-gray-600">A</span>
                </div>
                <div class="bg-green-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-green-700" id="score-B">0</span>
                    <span class="text-sm text-gray-600">B</span>
                </div>
                <div class="bg-yellow-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-yellow-700" id="score-C">0</span>
                    <span class="text-sm text-gray-600">C</span>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-purple-700" id="score-D">0</span>
                    <span class="text-sm text-gray-600">D</span>
                </div>
                <div class="bg-red-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-red-700" id="score-E">0</span>
                    <span class="text-sm text-gray-600">E</span>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-indigo-700" id="score-F">0</span>
                    <span class="text-sm text-gray-600">F</span>
                </div>
                <div class="bg-pink-50 p-4 rounded-lg text-center shadow-sm">
                    <span class="block text-3xl font-bold text-pink-700" id="score-G">0</span>
                    <span class="text-sm text-gray-600">G</span>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg text-center shadow-sm col-span-2 sm:col-span-1">
                    <span class="block text-3xl font-bold text-gray-800" id="score-Total">0</span>
                    <span class="text-sm text-gray-600">총합 (63)</span>
                </div>
            </div>
            
            <p id="total-warning" class="text-center text-red-600 font-semibold mt-4" style="display: none;">
                총합이 63이 아닙니다. 응답을 다시 확인해주세요.
            </p>
        </div>
    </div>

    <!-- 커스텀 메시지 박스 (알림창 대용) -->
    <div id="message-box" 
         class="message-box bg-red-600 text-white font-semibold py-3 px-6 rounded-lg shadow-xl opacity-0"
         style="display: none; transform: translate(-50%, 10px);">
        <span id="message-text"></span>
    </div>

    <script>
        // --- 1. 데이터 정의 ---

        const definitions = {
            A: '나는 나에게 협력하지 않는 사람들에 대해 일종의 어떠한 제재를 가할 수 있기 때문이다.',
            B: '영향력 있는 중요한 위치에 있는 사람과 긴밀한 관계나 연줄을 내가 가지고 있다는 것을 잘 알고 있기 때문이다.',
            C: '지식, 역량, 경험, 판단력 등의 나의 전문능력을 인정하고 존중하기 때문이다.',
            D: '다른 사람에게 가치 있는 정보나 자료를 가지고 있거나 그 것을 확보할 수 있는 방법을 잘 알고 있기 때문이다.',
            E: '조직상의 나의 업무나 위치가 다른 사람들의 활동을 결정하거나 명할 수 있는 권한이 주어져 있기 때문이다.',
            F: '다른 사람들이 나에게 개인적인 호의를 가지고 있어서 내가 원하는 방향에 맞추려 하기 때문이다.',
            G: '나에게 협력하거나 협조하는 사람들에게 금전적이든 금전적이지 않든 간에 어떤 형태로든 보상이나 지지를 해줄 수 있기 때문이다.'
        };

        // 괄호 내용(제재, 연줄 등)을 제거하고 알파벳만 남김
        const labels = {
            A: 'A', B: 'B', C: 'C', D: 'D',
            E: 'E', F: 'F', G: 'G'
        };

        const questions = [
            { id: 1, opt1: 'A', opt2: 'B' },  { id: 2, opt1: 'C', opt2: 'D' },  { id: 3, opt1: 'E', opt2: 'F' },
            { id: 4, opt1: 'G', opt2: 'A' },  { id: 5, opt1: 'B', opt2: 'C' },  { id: 6, opt1: 'D', opt2: 'E' },
            { id: 7, opt1: 'F', opt2: 'G' },  { id: 8, opt1: 'A', opt2: 'C' },  { id: 9, opt1: 'B', opt2: 'D' },
            { id: 10, opt1: 'C', opt2: 'E' }, { id: 11, opt1: 'D', opt2: 'A' }, { id: 12, opt1: 'E', opt2: 'B' },
            { id: 13, opt1: 'F', opt2: 'C' }, { id: 14, opt1: 'G', opt2: 'B' }, { id: 15, opt1: 'A', opt2: 'E' },
            { id: 16, opt1: 'B', opt2: 'F' }, { id: 17, opt1: 'C', opt2: 'G' }, { id: 18, opt1: 'D', opt2: 'F' },
            { id: 19, opt1: 'E', opt2: 'G' }, { id: 20, opt1: 'F', opt2: 'A' }, { id: 21, opt1: 'G', opt2: 'D' }
        ];

        // --- 2. DOM 요소 ---
        const questionsContainer = document.getElementById('questions-container');
        const calculateBtn = document.getElementById('calculate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultsSection = document.getElementById('results-section');
        const totalWarning = document.getElementById('total-warning');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');

        // --- 3. 함수 정의 ---

        /**
         * 선택 버튼 1개를 생성하는 헬퍼 함수
         */
        function createButton(q, val1, val2, isActive = false) {
            const activeClass = 'active bg-blue-600 text-white border-blue-600';
            const inactiveClass = 'inactive bg-gray-50 text-gray-600 border-gray-300 hover:bg-gray-100';
            const currentClass = isActive ? activeClass : inactiveClass;

            return `<button type="button" 
                            class="btn-choice ${currentClass} py-2 px-3 rounded-lg text-sm font-medium transition-colors border shadow-sm"
                            data-group="q${q.id}" 
                            data-type1="${q.opt1}" data-val1="${val1}" 
                            data-type2="${q.opt2}" data-val2="${val2}">
                        <span class="font-bold">${labels[q.opt1]}: ${val1}</span> / <span class="font-normal">${labels[q.opt2]}: ${val2}</span>
                    </button>`;
        }

        /**
         * 질문 목록을 HTML로 렌더링
         */
        function renderQuestions() {
            let html = '';
            questions.forEach(q => {
                html += `
                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-md">
                        <h3 class="font-bold mb-4 text-lg text-gray-800">${q.id}번 문항: ${labels[q.opt1]} vs ${labels[q.opt2]}</h3>
                        
                        <!-- 항목 설명 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-xs md:text-sm">
                            <div class="bg-gray-50 p-3 rounded-md border border-gray-200">
                                <span class="font-semibold text-gray-700">${labels[q.opt1]}</span>
                                <p class="text-gray-600 mt-1">${definitions[q.opt1]}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-md border border-gray-200">
                                <span class="font-semibold text-gray-700">${labels[q.opt2]}</span>
                                <p class="text-gray-600 mt-1">${definitions[q.opt2]}</p>
                            </div>
                        </div>

                        <!-- 선택 버튼 그룹 -->
                        <div class="flex flex-wrap gap-2 justify-center" data-group-container="q${q.id}">
                            ${createButton(q, 3, 0, true)} <!-- 3-0을 기본값으로 활성화 -->
                            ${createButton(q, 2, 1)}
                            ${createButton(q, 1, 2)}
                            ${createButton(q, 0, 3)}
                        </div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = html;
        }

        /**
         * 버튼 클릭 이벤트 처리 (이벤트 위임)
         */
        function handleButtonClick(e) {
            const clickedButton = e.target.closest('.btn-choice');
            if (!clickedButton) return; 

            const group = clickedButton.dataset.group;
            const allButtonsInGroup = document.querySelectorAll(`.btn-choice[data-group="${group}"]`);

            // 1. 그룹 내 모든 버튼을 비활성화
            allButtonsInGroup.forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white', 'border-blue-600');
                btn.classList.add('inactive', 'bg-gray-50', 'text-gray-600', 'border-gray-300');
                btn.style.boxShadow = 'none';
            });

            // 2. 클릭한 버튼만 활성화
            clickedButton.classList.add('active', 'bg-blue-600', 'text-white', 'border-blue-600');
            clickedButton.classList.remove('inactive', 'bg-gray-50', 'text-gray-600', 'border-gray-300');
            clickedButton.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)';
        }

        /**
         * 결과 계산 함수
         */
        function calculateResults() {
            const scores = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, G: 0 };
            let totalScore = 0;

            const allActiveButtons = document.querySelectorAll('button.btn-choice.active');
            
            if (allActiveButtons.length !== 21) {
                showMessage('모든 21개 문항에 응답(선택)해야 합니다.', true);
                return;
            }

            allActiveButtons.forEach(btn => {
                const type1 = btn.dataset.type1;
                const val1 = parseInt(btn.dataset.val1, 10);
                const type2 = btn.dataset.type2;
                const val2 = parseInt(btn.dataset.val2, 10);
                
                scores[type1] += val1;
                scores[type2] += val2;
                totalScore += (val1 + val2); 
            });

            // 결과 표시
            document.getElementById('score-A').textContent = scores.A;
            document.getElementById('score-B').textContent = scores.B;
            document.getElementById('score-C').textContent = scores.C;
            document.getElementById('score-D').textContent = scores.D;
            document.getElementById('score-E').textContent = scores.E;
            document.getElementById('score-F').textContent = scores.F;
            document.getElementById('score-G').textContent = scores.G;
            document.getElementById('score-Total').textContent = totalScore;

            // 총합 63 검증
            if (totalScore !== 63) {
                 totalWarning.style.display = 'block';
                 showMessage(`주의: 총합이 ${totalScore}입니다. 정상적인 값(63)을 확인해주세요.`, true);
            } else {
                 totalWarning.style.display = 'none';
                 showMessage('진단 결과가 계산되었습니다!', false);
            }

            // 결과 섹션 표시 및 스크롤
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        /**
         * 폼 초기화 함수
         */
        function resetForm() {
            // 모든 질문 그룹을 순회하며 첫 번째 버튼(3-0)을 활성화
            const allQuestionGroups = document.querySelectorAll('div[data-group-container]');
            allQuestionGroups.forEach(group => {
                const buttons = group.querySelectorAll('button.btn-choice');
                buttons.forEach((btn, index) => {
                    if (index === 0) {
                        // 3-0 버튼 활성화 (기본값)
                        btn.classList.add('active', 'bg-blue-600', 'text-white', 'border-blue-600');
                        btn.classList.remove('inactive', 'bg-gray-50', 'text-gray-600', 'border-gray-300');
                        btn.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)';
                    } else {
                        // 나머지 버튼 비활성화
                        btn.classList.remove('active', 'bg-blue-600', 'text-white', 'border-blue-600');
                        btn.classList.add('inactive', 'bg-gray-50', 'text-gray-600', 'border-gray-300');
                        btn.style.boxShadow = 'none';
                    }
                });
            });

            // 결과 숨기기 및 초기화
            resultsSection.style.display = 'none';
            totalWarning.style.display = 'none';
            
            // 점수판 초기화
            document.getElementById('score-A').textContent = '0';
            document.getElementById('score-B').textContent = '0';
            document.getElementById('score-C').textContent = '0';
            document.getElementById('score-D').textContent = '0';
            document.getElementById('score-E').textContent = '0';
            document.getElementById('score-F').textContent = '0';
            document.getElementById('score-G').textContent = '0';
            document.getElementById('score-Total').textContent = '0';
            
            // 페이지 상단으로 스크롤
            window.scrollTo({ top: 0, behavior: 'smooth' });
            showMessage('진단 내용이 초기화되었습니다.', false);
        }

        /**
         * 커스텀 메시지 표시 함수 (alert 대신 사용)
         */
        function showMessage(message, isError = false) {
            messageText.textContent = message;
            messageBox.className = 'message-box font-semibold py-3 px-6 rounded-lg shadow-xl opacity-0';
            messageBox.classList.add(isError ? 'bg-red-600' : 'bg-green-600');
            messageBox.style.display = 'block';
            
            setTimeout(() => {
                messageBox.style.opacity = '1';
                messageBox.style.transform = 'translate(-50%, 0)';
            }, 10);

            setTimeout(() => {
                messageBox.style.opacity = '0';
                messageBox.style.transform = 'translate(-50%, 10px)';
                setTimeout(() => {
                    messageBox.style.display = 'none';
                }, 300);
            }, 2500); 
        }

        // --- 4. 이벤트 리스너 연결 ---
        calculateBtn.addEventListener('click', calculateResults);
        resetBtn.addEventListener('click', resetForm);
        
        // 이벤트 위임으로 버튼 클릭 처리
        questionsContainer.addEventListener('click', handleButtonClick);
        
        // 페이지 로드 시 질문 렌더링
        document.addEventListener('DOMContentLoaded', renderQuestions);

    </script>
</body>
</html>
  
